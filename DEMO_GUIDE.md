# üöÄ Pentool Demo Guide - –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

## üìã –ß—Ç–æ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

‚úÖ **–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∞:**
- Main Agent (REST API –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä)
- Scanner Agent (TCP —Å–∫–∞–Ω–µ—Ä –ø–æ—Ä—Ç–æ–≤)
- Analyzer Agent (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤)
- Reporter Agent (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤)
- PostgreSQL, NATS, Redis
- –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

## üéØ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤ 3 —à–∞–≥–∞

### 1. –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã (2 –º–∏–Ω—É—Ç—ã)
```bash
# –°—Ç–∞—Ä—Ç—É–µ–º –≤—Å—é —Å–∏—Å—Ç–µ–º—É –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
./scripts/start-system.sh
```
**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
- –ó–∞–ø—É—Å—Ç—è—Ç—Å—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (PostgreSQL, NATS, Redis)
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –°–æ–±–µ—Ä—É—Ç—Å—è –≤—Å–µ –∞–≥–µ–Ω—Ç—ã
- –ó–∞–ø—É—Å—Ç—è—Ç—Å—è 4 –∞–≥–µ–Ω—Ç–∞ –≤ —Ñ–æ–Ω–µ
- API —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://localhost:8080

### 2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è (5-10 –º–∏–Ω—É—Ç)
```bash
# –ü–æ–ª–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏
./scripts/demo.sh
```
**–ß—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä–∫—É –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
- –ó–∞–ø—É—Å–∫ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è scanme.nmap.org
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API (2 –º–∏–Ω—É—Ç—ã)
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –≤—Å–µ—Ö endpoints
./scripts/test-api.sh
```

## üéì –î–ª—è –∑–∞—â–∏—Ç—ã –¥–∏—Å—Å–µ—Ä—Ç–∞—Ü–∏–∏

### –ö–ª—é—á–µ–≤—ã–µ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:

**1. Go Concurrency (–≥–æ—Ä—É—Ç–∏–Ω—ã)**
```go
// –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
for _, port := range ports {
    semaphore <- struct{}{} // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ 10 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
    go func(p int) {
        defer func() { <-semaphore }()
        scanPort(target, p) // –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞
    }(port)
}
```

**2. –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- Main Agent ‚Üê HTTP ‚Üê –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- Scanner ‚Üî NATS ‚Üî Analyzer ‚Üî Reporter
- PostgreSQL –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

**3. Message-Driven Architecture**
```go
// NATS pub/sub –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è
nats.Publish("scan.request", scanData)
nats.Subscribe("scan.result", handleResult)
```

### –ù–∞—É—á–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞:

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- 20 –ø–æ—Ä—Ç–æ–≤ —Å–∫–∞–Ω–∏—Ä—É—é—Ç—Å—è –∑–∞ ~5-15 —Å–µ–∫—É–Ω–¥
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ goroutines
- –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O

**–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤
- Message queue –¥–ª—è distributed processing
- Database persistence

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏:**
- Nmap: –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π C++
- Masscan: single-threaded scanner
- Pentool: distributed Go microservices

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –¥–∏—Å—Å–µ—Ä—Ç–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–µ–º–æ —Å–æ–±–µ—Ä–∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ:

```bash
# –í—Ä–µ–º—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
curl http://localhost:8080/scan/{scan-id} | jq '.created_at, .completed_at'

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker exec pentool-postgres psql -U admin -d pentool -c "SELECT COUNT(*) FROM services;"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
docker exec pentool-postgres psql -U admin -d pentool -c "
SELECT
  target,
  total_ports,
  open_ports,
  EXTRACT(EPOCH FROM (completed_at - created_at)) as duration_seconds
FROM scans
ORDER BY created_at DESC LIMIT 5;"
```

## üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
```bash
./scripts/stop-system.sh
```

## üîç Troubleshooting

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
./scripts/stop-system.sh
./scripts/start-system.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f logs/main-agent.log
tail -f logs/scanner-agent.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker —Å–µ—Ä–≤–∏—Å–æ–≤
docker ps
docker logs pentool-postgres
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–º–æ

```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç API
curl http://localhost:8080/health

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
curl -X POST http://localhost:8080/scan \
  -H "Content-Type: application/json" \
  -d '{"target":"scanme.nmap.org"}'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–∑–∞–º–µ–Ω–∏ {scan-id})
curl http://localhost:8080/scan/{scan-id}

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ NATS —Å–æ–æ–±—â–µ–Ω–∏–π
docker exec -it pentool-nats nats sub 'scan.*'
```

---

**‚ú® –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–∏—à–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:** –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ Go –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è production-ready –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π!